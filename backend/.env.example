# Backend Environment Variables (.env.example)

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=5000
BASE_URL=http://localhost:5000
FRONTEND_URL=http://localhost:3000

# ============================================
# DATABASE CONFIGURATION (Supabase PostgreSQL)
# ============================================
# Get from: https://supabase.com/dashboard/project/_/settings/database
DATABASE_URL="postgresql://postgres.ievmlznmpafvhsrdkjhj:V5en2tfgkwIMugDz@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"

# ============================================
# GOOGLE OAUTH CONFIGURATION
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=792610664211-0jsdfnneaqsu6o3qdq8jges89kf59us5.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=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

# Redirect URI (must match Google Console)
GOOGLE_REDIRECT_URI=http://localhost:5000/api/auth/google/callback

# ============================================
# JWT CONFIGURATION
# ============================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=uqvU/zlgNX/CK8fxNO32DYszrPHItXMCNCiyRvR7tz8B9QM93uyaMg7zuPR3v16MS7He9BHisKhO9455gdX9TA==
JWT_EXPIRE=7d
JWT_REFRESH_EXPIRE=30d

# ============================================
# SUPABASE STORAGE (for audio files)
# ============================================
# Get from: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://ievmlznmpafvhsrdkjhj.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlldm1sem5tcGFmdmhzcmRramhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1MjM2OTIsImV4cCI6MjA3NTA5OTY5Mn0.83Vy-d-FT8ExDyFuWpEFiaWZ7c4GzzhwCuzlu0bVX0M
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlldm1sem5tcGFmdmhzcmRramhqIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTUyMzY5MiwiZXhwIjoyMDc1MDk5NjkyfQ.DO0l34zfyctO_2pNcP2ZrS4p8LufjxXOSJdoFJoEvZg
SUPABASE_BUCKET_NAME=meeting-audio

# ============================================
# AI SUMMARIZATION CONFIGURATION
# ============================================

# Custom Model API (Fine-tuned Qwen2.5-7B via NGROK)
# ⚠️ IMPORTANT: Update this EVERY TIME you restart the notebook!
#
# Setup Instructions:
# 1. Open: EchoNote_API_Simplified_BEGINNER_FRIENDLY.ipynb in Google Colab
# 2. Run cells 1-6 to start the model and NGROK tunnel
# 3. Copy the NGROK public URL from Cell 6 output (looks like: https://abc123.ngrok-free.app)
# 4. Paste the URL below (replace the placeholder)
# 5. Verify API key matches the notebook (Cell 4)
# 6. Save this file and restart backend: npm run dev
#
# Notes:
# - NGROK URL changes every time the notebook restarts (unless using static domain)
# - API key MUST match exactly between notebook and backend
# - Timeout is 70s to account for model inference (~5s) + network overhead
CUSTOM_MODEL_API_URL=https://your-domain.ngrok-free.app  # ← UPDATE THIS!
CUSTOM_MODEL_API_KEY=echonote-secret-api-key-2025  # ← Must match notebook Cell 4
CUSTOM_MODEL_TIMEOUT=70000  # 70 seconds (don't change)

# ============================================
# WHISPER API CONFIGURATION
# ============================================
# Option 1: OpenAI Whisper API
# OPENAI_API_KEY=sk-your_openai_api_key_here

# Option 2: Local Whisper (leave OPENAI_API_KEY empty)
WHISPER_MODEL_PATH=/path/to/whisper/models
WHISPER_MODEL_SIZE=base.en

# ============================================
# EMAIL CONFIGURATION (Gmail OAuth2)
# ============================================
# Get refresh token from: https://developers.google.com/oauthplayground/
# Instructions:
# 1. Go to OAuth Playground
# 2. Settings → Use your own OAuth credentials
# 3. Enter GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET
# 4. Select scope: https://mail.google.com/
# 5. Authorize with your Gmail account
# 6. Exchange code for tokens and copy the refresh_token
GMAIL_USER=hariskhan936.hk@gmail.com
GMAIL_REFRESH_TOKEN=1//04Ld2hTlztJR_CgYIARAAGAQSNwF-L9IrGCkMxSjj7OAVFJeUaSu0oLWcJCj_dwSQtj58GlfOKULV97dd88PbMLSIiRyb8GLoCWw
EMAIL_FROM=EchoNote <hariskhan936.hk@gmail.com>
EMAIL_REPLY_TO=hariskhan936.hk@gmail.com

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
MAX_FILE_SIZE=52428800
# 50MB in bytes (10 min audio ~10-20MB)
UPLOAD_DIR=./src/uploads
ALLOWED_AUDIO_FORMATS=audio/mpeg,audio/wav,audio/mp3,audio/webm,audio/ogg

# ============================================
# AUDIO PROCESSING CONFIGURATION
# ============================================
MAX_AUDIO_DURATION=600
# Max duration in seconds (10 minutes)
AUDIO_SAMPLE_RATE=16000
# 16kHz for Whisper
AUDIO_CHANNELS=1
# Mono
PYTHON_PATH=python3
# or python, py, depending on your system

# ============================================
# AUTO-DELETION CONFIGURATION
# ============================================
DEFAULT_AUTO_DELETE_DAYS=30
# Default days before audio auto-deletion
CRON_CLEANUP_SCHEDULE=0 2 * * *
# Run cleanup daily at 2 AM

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW=15
# Minutes
RATE_LIMIT_MAX_REQUESTS=100
# Max requests per window

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=info
# Options: error, warn, info, debug
LOG_FILE_PATH=./logs

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_ORIGIN=http://localhost:3000
# Comma-separated for multiple: http://localhost:3000,https://yourdomain.com

# ============================================
# DEVELOPMENT/TESTING FLAGS
# ============================================
SKIP_EMAIL_SEND=false
# Set to true to skip email sending in development
USE_FFMPEG_FALLBACK=true
# Use FFmpeg if Python audio processing fails
ENABLE_PROCESSING_LOGS=true
# Enable detailed processing logs in database